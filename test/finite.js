(function () {var c={};var j,d={};!function(){var t={},e=function(t){return t.firstChild},n=[],i=function(t,e,n){void 0===n&&(n=!1);var r=t.attributes;if(r&&r.length)for(var s=0;s<r.length;s++){var u=r.item(s).name;u.startsWith("on")&&(t.removeAttribute(u),e(u.slice(2),t,n))}t.childNodes.forEach(function(t){1!==t.nodeType&&8!==t.nodeType||(8===t.nodeType&&("RAW_START"===t.data.trim()&&(n=!0),"RAW_END"===t.data.trim()&&(n=!1)),i(t,e,n))})},r=function(t,e,n){var i=t;return e.map(function(t,e){i=i.replace(new RegExp(t,"g"),n[e])}),i},s=function(t,e){return t.length===e.length&&t.every(function(t,n){return t===e[n]})},u=function(t){for(;e(t);)t.removeChild(e(t))},o=function(t,r){var s=document.createElement("template");return s.innerHTML=t.trim(),i(e(s.content),function(t,e,i){var s=i?n.shift():r.shift();e.addEventListener(t,"function"!=typeof s?function(){}:s)}),e(s.content)},a=function(){function t(t,e){this.lit=t,this.values=e,this.result="",this.events=[],this.isRaw=!1}return t.prototype.checkValues=function(t){return!!s(t,this.values)||(this._update(t),!1)},t.prototype.checkLiteral=function(t){return s(t,this.lit)},t.prototype.getResult=function(){return""===this.result&&this._update(),{result:this.result,events:this.events}},t.prototype.forceUpdate=function(){this._update()},t.prototype._update=function(t){var e=this;void 0===t&&(t=this.values),this.result="",this.events=[],this.isRaw&&(this.result+="\n<!-- RAW_START -->\n"),t.forEach(function(t,n){var i=e.lit[n];if(Array.isArray(t)&&(t=t.join("")),i.endsWith("$")&&(t=function(t){return r(t,["&",">","<","\"","'","`"],["&amp;","&gt;","&quot;","&#39;","&#39;","&#96;"])}(t),i=i.slice(0,-1)),e.result+=i,i.endsWith("=")||i.endsWith("=\"")){i.split(" ").pop().startsWith("on")&&e.events.push(t);var s=r(t.toString(),["'","\""],["'","'"]);i.endsWith("=")&&(e.result+="\""+s+"\""),i.endsWith("=\"")&&(e.result+=""+s)}else e.result+=t}),this.result+=this.lit[this.lit.length-1],this.isRaw&&(this.result+="\n<!-- RAW_END -->\n")},t}(),c=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return new a(t.raw,e)},h=function(t){t.isRaw=!0,t.forceUpdate();var e=t.getResult(),i=e.result;return function(t){n=n.concat(t)}(e.events),i},l=new WeakMap,f=function(t,e){var n=l.get(e);n&&n.checkLiteral(t.lit)?n.checkValues(t.values)||(u(e),e.appendChild(o(n.result,n.events))):function(){var n=t.getResult(),i=n.result,r=n.events;l.set(e,t),u(e),e.appendChild(o(i,r))}()};window.html=c,window.render=f,window.raw=h,t.raw=h,t.render=f,t.html=c,"object"==typeof d?d=t:"function"==typeof j&&j.amd&&j(function(){return t})}();var e={};var l={};Object.defineProperty(l,"__esModule",{value:!0});var m=n;function q(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function n(e,r,n){if(!r)return null;return!Array.isArray(r)&&(r=[r]),function e(t){var $=r.shift();if(Array.isArray(t)){var a=t.slice();return a[$]=r.length?e(a[$]):n,a}return Object.assign({},t,q({},$,r.length?e(t[$]):n))}(e)}l.default=m;function s(o){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}var t=function(e){return r(e)&&!u(e)};function r(e){return!!e&&"object"==typeof e}function u(e){var r=Object.prototype.toString.call(e);return"[object RegExp]"===r||"[object Date]"===r||x(e)}var v="function"==typeof Symbol&&Symbol.for,w=v?Symbol.for("react.element"):60103;function x(e){return e.$$typeof===w}function y(e){return Array.isArray(e)?[]:{}}function i(e,r){return!1!==r.clone&&r.isMergeableObject(e)?f(y(e),e,r):e}function z(e,r,$){return e.concat(r).map(function(e){return i(e,$)})}function A(e,r,$){var a={};return $.isMergeableObject(e)&&Object.keys(e).forEach(function(r){a[r]=i(e[r],$)}),Object.keys(r).forEach(function(o){$.isMergeableObject(r[o])&&e[o]?a[o]=f(e[o],r[o],$):a[o]=i(r[o],$)}),a}function f(e,r,$){($=$||{}).arrayMerge=$.arrayMerge||z,$.isMergeableObject=$.isMergeableObject||t;var a=Array.isArray(r);return a===Array.isArray(e)?a?$.arrayMerge(e,r,$):A(e,r,$):i(r,$)}f.all=function(e,r){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(e,$){return f(e,$,r)},{})};var B=f;var C=function(o,e){return function(t){return o(t,e)}};function k(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];console.log(o)}var p=function(o,e,t){void 0===t&&(t=[]),Object.entries(o).forEach(function(o){var r=o[0],$=o[1];!$||"object"!==s($)||$ instanceof Promise?e($,t.concat([r])):p($,e,t.concat([r]))})};var g=function(o,e){return B(o,e,{arrayMerge:function(o,e){return e}})};var D=function(){function t(){this.states=[],this.point=null,this.pointer=null}return t.prototype.add=function(t){this.states.push(t)},t.prototype.find=function(t){return this.states.find(function(n){return n.name===t})},t.prototype.setMountPoint=function(t){this.point=t},t.prototype.getMountPoint=function(){return this.point},t}();var h={};var E=h&&h.__assign||Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var o in r=arguments[e])Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t},F=h&&h.__rest||function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)r.indexOf(n[o])<0&&(e[n[o]]=t[n[o]])}return e},o=function(){function t(t){var r=t.name,e=t.view,n=t.memory,o=void 0===n?{}:n,i=t.transitions,s=void 0===i?[]:i,a=F(t,["name","view","memory","transitions"]);this.name=r,this.view=e,this.memory=o,this.transitions=s,this.rest=a}return t.prototype.findTransitionsByName=function(t){return this.transitions.find(function(r){return r.name===t})},t.prototype.restWithMemory=function(){var t=this;return Object.keys(this.rest).reduce(function(r,e){var n;return E({},r,((n={})[e]=C(t.rest[e],t.memory),n))},{})},t}();h.State=o;var G=e&&e.__assign||Object.assign||function(e){for(var r,a=1,$=arguments.length;a<$;a++)for(var n in r=arguments[a])Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e},H=e&&e.__rest||function(e,r){var a={};for(var $ in e)Object.prototype.hasOwnProperty.call(e,$)&&r.indexOf($)<0&&(a[$]=e[$]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for($=Object.getOwnPropertySymbols(e);n<$.length;n++)r.indexOf($[n])<0&&(a[$[n]]=e[$[n]])}return a},b=new D,a=function(){function e(){}return e.State=function(e){var r=e.name,a=e.view,$=e.memory,n=e.transitions,t=H(e,["name","view","memory","transitions"]),i=new o(G({name:r,view:a,memory:$,transitions:n},t));return b.add(i),i},e.AsyncTransition=function(e,r){void 0===r&&(r={});var a=b.pointer,$=a.findTransitionsByName(e).to,n=b.find($),t=[];p(r,function(e,r){e instanceof Promise&&t.push([e,r])}),Promise.all(t.reduce(function(e,r){return e.concat([r[0]])},[])).then(function(i){i.map(function(e,a){r=m(r,t[a][1],e)}),n.memory=g(n.memory,r),b.pointer=n,k("ASYNC TRANSITION",e,a.name+" -> "+$,n.memory),d.render(n.view(g(n.memory,n.restWithMemory())),b.getMountPoint())})},e.Transition=function(e,r){void 0===r&&(r={});var a=b.pointer,$=a.findTransitionsByName(e).to,n=b.find($);n.memory=g(n.memory,r),b.pointer=n,k("TRANSITION",e,a.name+" -> "+$," "+a.memory+"->"+n.memory),d.render(n.view(g(n.memory,n.restWithMemory())),b.getMountPoint())},e.Render=function(e,r){b.setMountPoint(r),b.pointer=e,k("INIT_STATE",e.name||"Anonymous",e.memory),d.render(e.view(g(e.memory,e.restWithMemory())),r)},e.T=function(e,r){return{name:e,to:r}},e}();e.Finite=a;window.h=d.html,window.raw=d.raw,window.Finite=a,window.State=a.State,window.Render=a.Render,window.Transition=a.Transition,window.AsyncTransition=a.AsyncTransition,window.T=a.T;var I=a.State;c.State=I;var J=a.Render;c.Render=J;var K=a.Transition;c.Transition=K;var L=a.AsyncTransition;c.AsyncTransition=L;var M=a.T;c.T=M,c.h=d.html,c.raw=d.raw,c.default=a;if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=c}else if(typeof define==="function"&&define.amd){define(function(){return c})}})();